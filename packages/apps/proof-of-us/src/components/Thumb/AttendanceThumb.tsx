import { getContrast } from '@/utils/getContrast';
import { MonoDownloading } from '@kadena/react-icons';
import type { FC } from 'react';
import {
  attendanceBackgroundClass,
  attendanceLoaderClass,
  attendanceThumbClass,
} from './style.css';

interface IProps {
  token: IProofOfUsTokenMeta;
  isMinted?: boolean;
}
export const AttendanceThumb: FC<IProps> = ({ token, isMinted }) => {
  const invertColor = getContrast(
    token.properties.avatar?.backgroundColor ?? '#000',
  );

  return (
    <div
      className={attendanceThumbClass}
      style={{
        color: invertColor,
      }}
    >
      <svg
        className={attendanceBackgroundClass}
        width="50"
        height="50"
        viewBox="0 0 50 50"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <mask
          id="path-1-outside-1_2765_234"
          maskUnits="userSpaceOnUse"
          x="0"
          y="0"
          width="50"
          height="50"
          fill="black"
        >
          <rect fill="white" width="50" height="50" />
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M24.025 1C24.5635 1 25 1.43652 25 1.975C25 2.51348 25.4365 2.95 25.975 2.95L28.025 2.95C28.5635 2.95 29 2.51348 29 1.975C29 1.43652 29.4365 1 29.975 1H47C48.1046 1 49 1.89543 49 3V13C49 14.1046 48.0932 14.977 47.0156 15.2195C42.9998 16.1232 40 19.7113 40 24C40 28.2887 42.9998 31.8768 47.0156 32.7805C48.0932 33.023 49 33.8954 49 35V47C49 48.1046 48.1046 49 47 49H29.975C29.4365 49 29 48.5635 29 48.025C29 47.4865 28.5635 47.05 28.025 47.05H25.975C25.4365 47.05 25 47.4865 25 48.025C25 48.5635 24.5635 49 24.025 49H3C1.89543 49 1 48.1046 1 47V3C1 1.89543 1.89543 1 3 1H24.025ZM27 7.85C25.8954 7.85 25 8.74543 25 9.85V10.75C25 11.8546 25.8954 12.75 27 12.75C28.1046 12.75 29 11.8546 29 10.75V9.85C29 8.74543 28.1046 7.85 27 7.85ZM27 17.65C25.8954 17.65 25 18.5454 25 19.65L25 20.55C25 21.6546 25.8954 22.55 27 22.55C28.1046 22.55 29 21.6546 29 20.55L29 19.65C29 18.5454 28.1046 17.65 27 17.65ZM27 27.45C25.8954 27.45 25 28.3454 25 29.45V30.35C25 31.4546 25.8954 32.35 27 32.35C28.1046 32.35 29 31.4546 29 30.35V29.45C29 28.3454 28.1046 27.45 27 27.45ZM27 37.25C25.8954 37.25 25 38.1454 25 39.25V40.15C25 41.2546 25.8954 42.15 27 42.15C28.1046 42.15 29 41.2546 29 40.15V39.25C29 38.1454 28.1046 37.25 27 37.25Z"
          />
        </mask>
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M24.025 1C24.5635 1 25 1.43652 25 1.975C25 2.51348 25.4365 2.95 25.975 2.95L28.025 2.95C28.5635 2.95 29 2.51348 29 1.975C29 1.43652 29.4365 1 29.975 1H47C48.1046 1 49 1.89543 49 3V13C49 14.1046 48.0932 14.977 47.0156 15.2195C42.9998 16.1232 40 19.7113 40 24C40 28.2887 42.9998 31.8768 47.0156 32.7805C48.0932 33.023 49 33.8954 49 35V47C49 48.1046 48.1046 49 47 49H29.975C29.4365 49 29 48.5635 29 48.025C29 47.4865 28.5635 47.05 28.025 47.05H25.975C25.4365 47.05 25 47.4865 25 48.025C25 48.5635 24.5635 49 24.025 49H3C1.89543 49 1 48.1046 1 47V3C1 1.89543 1.89543 1 3 1H24.025ZM27 7.85C25.8954 7.85 25 8.74543 25 9.85V10.75C25 11.8546 25.8954 12.75 27 12.75C28.1046 12.75 29 11.8546 29 10.75V9.85C29 8.74543 28.1046 7.85 27 7.85ZM27 17.65C25.8954 17.65 25 18.5454 25 19.65L25 20.55C25 21.6546 25.8954 22.55 27 22.55C28.1046 22.55 29 21.6546 29 20.55L29 19.65C29 18.5454 28.1046 17.65 27 17.65ZM27 27.45C25.8954 27.45 25 28.3454 25 29.45V30.35C25 31.4546 25.8954 32.35 27 32.35C28.1046 32.35 29 31.4546 29 30.35V29.45C29 28.3454 28.1046 27.45 27 27.45ZM27 37.25C25.8954 37.25 25 38.1454 25 39.25V40.15C25 41.2546 25.8954 42.15 27 42.15C28.1046 42.15 29 41.2546 29 40.15V39.25C29 38.1454 28.1046 37.25 27 37.25Z"
          fill={token.properties.avatar?.backgroundColor ?? '#665BE1'}
        />
        <path
          d="M29 19.65H30H29ZM25 20.55H24H25ZM47.0156 32.7805L46.7961 33.7561L47.0156 32.7805ZM25.975 2.95V3.95V2.95ZM28.025 1.95L25.975 1.95V3.95H28.025V1.95ZM47 0H29.975V2H47V0ZM50 13V3H48V13H50ZM41 24C41 20.1891 43.6657 16.9983 47.2351 16.1951L46.7961 14.2439C42.3339 15.248 39 19.2335 39 24H41ZM47.2351 31.8049C43.6657 31.0017 41 27.8109 41 24H39C39 28.7665 42.3339 32.752 46.7961 33.7561L47.2351 31.8049ZM50 47V35H48V47H50ZM29.975 50H47V48H29.975V50ZM25.975 48.05H28.025V46.05H25.975V48.05ZM3 50H24.025V48H3V50ZM0 3V47H2V3H0ZM24.025 0H3V2H24.025V0ZM26 10.75V9.85H24V10.75H26ZM28 9.85V10.75H30V9.85H28ZM26 20.55L26 19.65H24L24 20.55H26ZM28 19.65L28 20.55H30L30 19.65H28ZM26 30.35V29.45H24V30.35H26ZM28 29.45V30.35H30V29.45H28ZM26 40.15V39.25H24V40.15H26ZM28 39.25V40.15H30V39.25H28ZM30 39.25C30 37.5931 28.6569 36.25 27 36.25V38.25C27.5523 38.25 28 38.6977 28 39.25H30ZM27 43.15C28.6569 43.15 30 41.8069 30 40.15H28C28 40.7023 27.5523 41.15 27 41.15V43.15ZM26 39.25C26 38.6977 26.4477 38.25 27 38.25V36.25C25.3431 36.25 24 37.5931 24 39.25H26ZM24 40.15C24 41.8069 25.3431 43.15 27 43.15V41.15C26.4477 41.15 26 40.7023 26 40.15H24ZM30 29.45C30 27.7931 28.6569 26.45 27 26.45V28.45C27.5523 28.45 28 28.8977 28 29.45H30ZM27 33.35C28.6569 33.35 30 32.0069 30 30.35H28C28 30.9023 27.5523 31.35 27 31.35V33.35ZM26 29.45C26 28.8977 26.4477 28.45 27 28.45V26.45C25.3431 26.45 24 27.7931 24 29.45H26ZM30 19.65C30 17.9931 28.6569 16.65 27 16.65V18.65C27.5523 18.65 28 19.0977 28 19.65H30ZM27 23.55C28.6569 23.55 30 22.2069 30 20.55H28C28 21.1023 27.5523 21.55 27 21.55V23.55ZM26 19.65C26 19.0977 26.4477 18.65 27 18.65V16.65C25.3431 16.65 24 17.9931 24 19.65H26ZM24 20.55C24 22.2069 25.3431 23.55 27 23.55V21.55C26.4477 21.55 26 21.1023 26 20.55H24ZM30 9.85C30 8.19315 28.6569 6.85 27 6.85V8.85C27.5523 8.85 28 9.29772 28 9.85H30ZM27 13.75C28.6569 13.75 30 12.4069 30 10.75H28C28 11.3023 27.5523 11.75 27 11.75V13.75ZM26 9.85C26 9.29772 26.4477 8.85 27 8.85V6.85C25.3431 6.85 24 8.19315 24 9.85H26ZM24 10.75C24 12.4069 25.3431 13.75 27 13.75V11.75C26.4477 11.75 26 11.3023 26 10.75H24ZM2 3C2 2.44772 2.44772 2 3 2V0C1.34314 0 0 1.34315 0 3H2ZM3 48C2.44772 48 2 47.5523 2 47H0C0 48.6569 1.34315 50 3 50V48ZM24 48.025C24 48.0234 24.0005 48.0193 24.0024 48.015C24.0039 48.0112 24.0058 48.0089 24.0073 48.0073C24.0089 48.0058 24.0112 48.0039 24.015 48.0024C24.0193 48.0005 24.0234 48 24.025 48V50C25.1158 50 26 49.1158 26 48.025H24ZM30 48.025C30 46.9342 29.1158 46.05 28.025 46.05V48.05C28.0234 48.05 28.0193 48.0495 28.015 48.0476C28.0112 48.0461 28.0089 48.0442 28.0073 48.0427C28.0058 48.0411 28.0039 48.0388 28.0024 48.035C28.0005 48.0307 28 48.0266 28 48.025H30ZM29.975 48C29.9766 48 29.9807 48.0005 29.985 48.0024C29.9888 48.0039 29.9911 48.0058 29.9927 48.0073C29.9942 48.0089 29.9961 48.0112 29.9976 48.015C29.9995 48.0193 30 48.0234 30 48.025H28C28 49.1158 28.8842 50 29.975 50V48ZM48 47C48 47.5523 47.5523 48 47 48V50C48.6569 50 50 48.6569 50 47H48ZM46.7961 33.7561C47.552 33.9262 48 34.4884 48 35H50C50 33.3025 48.6345 32.1198 47.2351 31.8049L46.7961 33.7561ZM48 13C48 13.5116 47.552 14.0738 46.7961 14.2439L47.2351 16.1951C48.6345 15.8802 50 14.6975 50 13H48ZM47 2C47.5523 2 48 2.44772 48 3H50C50 1.34315 48.6569 0 47 0V2ZM30 1.975C30 1.97661 29.9995 1.98066 29.9976 1.98504C29.9961 1.98875 29.9942 1.99114 29.9927 1.99268C29.9911 1.99421 29.9888 1.99605 29.985 1.99762C29.9807 1.99948 29.9766 2 29.975 2V0C28.8842 0 28 0.884237 28 1.975H30ZM28.025 3.95C29.1158 3.95 30 3.06576 30 1.975H28C28 1.97339 28.0005 1.96934 28.0024 1.96496C28.0039 1.96125 28.0058 1.95886 28.0073 1.95732C28.0089 1.95579 28.0112 1.95395 28.015 1.95238C28.0193 1.95052 28.0234 1.95 28.025 1.95V3.95ZM26 1.975C26 0.884237 25.1158 0 24.025 0V2C24.0234 2 24.0193 1.99948 24.015 1.99762C24.0112 1.99605 24.0089 1.99421 24.0073 1.99268C24.0058 1.99114 24.0039 1.98875 24.0024 1.98504C24.0005 1.98066 24 1.97661 24 1.975H26ZM25.975 46.05C24.8842 46.05 24 46.9342 24 48.025H26C26 48.0266 25.9995 48.0307 25.9976 48.035C25.9961 48.0388 25.9942 48.0411 25.9927 48.0427C25.9911 48.0442 25.9888 48.0461 25.985 48.0476C25.9807 48.0495 25.9766 48.05 25.975 48.05V46.05ZM24 30.35C24 32.0069 25.3431 33.35 27 33.35V31.35C26.4477 31.35 26 30.9023 26 30.35H24ZM24 1.975C24 3.06576 24.8842 3.95 25.975 3.95V1.95C25.9766 1.95 25.9807 1.95052 25.985 1.95238C25.9888 1.95395 25.9911 1.95579 25.9927 1.95732C25.9942 1.95886 25.9961 1.96125 25.9976 1.96496C25.9995 1.96934 26 1.97339 26 1.975H24Z"
          fill="white"
          mask="url(#path-1-outside-1_2765_234)"
        />
      </svg>
      {!isMinted && (
        <div
          className={attendanceLoaderClass}
          style={{
            color: invertColor,
          }}
        >
          <MonoDownloading style={{ fill: invertColor }} fontSize="md" />
        </div>
      )}
    </div>
  );
};
